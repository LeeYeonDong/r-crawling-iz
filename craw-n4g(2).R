# n4g - dark_souls
head <- "https://n4g.com/channel/"
keyword <- "dark-souls"
end <- "?load=3"

target1 <- paste0(head,keyword,end)

remDr$navigate(target1)

Sys.sleep(time = 5)

n <- 1000

body <- remDr$getPageSource()[[1]]
body <- body %>% read_html()

# lead more n?????? ?????? - ?????? ?????? ?????? ??????
for(i in 1:n){
  tryCatch({
    
    more_reply <- remDr$findElement("css", "a.f-load-more-link")
    more_reply$clickElement()
    
    if(i==n) break()
    
    Sys.sleep(time = 1)
    
  }, error = function(e) cat("????????? ??? ????????????!\n"))
}

# collect element
# head
body <- remDr$getPageSource()[[1]]
body <- body %>% read_html()

head_??????_ds <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_attr("href")

head_??????_ds <- paste0("https://n4g.com/",head_??????_ds)

head_??????_ds <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_text()

head_?????????_ds <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("span.temp-label") %>%
  html_text()

head_??????_ds <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-timeago") %>%
  html_text()

head_??????_ds <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V1) %>% as.vector()

head_??????_ds <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V2) %>% as.vector()

# ??????
??????_ds <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_attr("href")
??????_ds <- paste0("https://n4g.com/",??????_ds)

??????_ds <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_text()

?????????_ds <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("span.temp-label") %>%
  html_text()

??????_ds <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-timeago") %>%
  html_text()

??????_ds <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V1) %>% as.vector()

??????_ds <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V2) %>% as.vector()

# head ??????
head_??????_ds <- c()

env = environment()
env$ans <- NULL
for (i in 1:length(head_??????_ds)){
  tryCatch({
    body <- head_??????_ds[i] %>% read_html()
    
    cat(i, '????????? ?????? ????????????.\n')
    
    head_??????_ds.tmp <- body %>% 
      html_nodes("a.sd-commentcount") %>%
      html_text()
    
    if (length(head_??????_ds.tmp) != 0) {
      head_??????_ds <- append(head_??????_ds, head_??????_ds.tmp)
    } else {
      head_??????_ds <- append(head_??????_ds,"0")
    }   
    
    Sys.sleep(time = 1)
    
  }, error = function(e) {
    cat(conditionMessage(e),"\n")
    env$ans[i] <- "error"
  }
  )
}

head_??????_ds <- head_??????_ds %>% as.integer()

# ?????? ?????? "0" ????????????
er <- grep("error",env$ans)
for (i in 1:length(er)){
  head_??????_ds <- append(head_??????_ds,c(0),after = er[i]-1)
}

head_n4g_ds <- data.frame(head_??????_ds,
                          head_?????????_ds,
                          head_??????_ds,
                          head_??????_ds,
                          head_??????_ds,
                          head_??????_ds,
                          head_??????_ds)

names(head_n4g_ds) <- c("??????", "?????????", "??????", "??????", "??????", "??????", "??????")
head_n4g_ds %>% str()


# ?????? ??????
??????_ds <- c()

env = environment()
env$ans <- NULL
for (i in 1:length(??????_ds)){
  tryCatch({
    body <- ??????_ds[i] %>% read_html()
    
    cat(i, '????????? ?????? ????????????.\n')
    
    ??????_ds.tmp <- body %>% 
      html_nodes("a.sd-commentcount") %>%
      html_text()
    
    if (length(??????_ds.tmp) != 0) {
      ??????_ds <- append(??????_ds, ??????_ds.tmp)
    } else {
      ??????_ds <- append(??????_ds,"0")
    }   
    
    Sys.sleep(time = 0.5)
    
  }, error = function(e) {
    cat(conditionMessage(e),"\n")
    env$ans[i] <- "error"
  }
  )
}
??????_ds <- ??????_ds %>% as.integer()

# ?????? ?????? "0" ????????????
er <- grep("error",env$ans)
for (i in 1:length(er)){
  ??????_ds <- append(??????_ds,c(0),after = er[i]-1)
}

n4g_ds <- data.frame(??????_ds,
                       ?????????_ds,
                       ??????_ds,
                       ??????_ds,
                       ??????_ds,
                       ??????_ds,
                       ??????_ds)

names(n4g_ds) <- c("??????", "?????????", "??????", "??????", "??????", "??????", "??????")
n4g_ds %>% str()

# head + ??????
n4g_ds <- bind_rows(head_n4g_ds,n4g_ds)
n4g_ds %>% dim()

write.csv(n4g_ds, file = "D:/?????????/??????/?????????/?????????????????? ????????????/n4g_ds.csv", row.names=FALSE)

# n4g – the last of us
# RSelenium
remDr <- remoteDriver(remoteServerAddr="localhost", 
                      port=4445L, 
                      browserName="chrome")
remDr$open()
head <- "https://n4g.com/channel/"
keyword <- "the-last-of-us"
end <- "?load=3"

target2 <- paste0(head,keyword,end)

remDr$navigate(target2)

Sys.sleep(time = 5)

n <- 1000

body <- remDr$getPageSource()[[1]]
body <- body %>% read_html()

# lead more n?????? ?????? - ?????? ?????? ?????? ??????
for(i in 1:n){
  tryCatch({
    
    more_reply <- remDr$findElement("css", "a.f-load-more-link")
    more_reply$clickElement()
    
    if(i==n) break()
    
    Sys.sleep(time = 1)
    
  }, error = function(e) cat("????????? ??? ????????????!\n"))
}

# collect element
# head
body <- remDr$getPageSource()[[1]]
body <- body %>% read_html()

head_??????_lou <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_attr("href")

head_??????_lou <- paste0("https://n4g.com/",head_??????_lou)

head_??????_lou <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_text()

head_?????????_lou <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("span.temp-label") %>%
  html_text()

head_??????_lou <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-timeago") %>%
  html_text()

head_??????_lou <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V1) %>% as.vector()

head_??????_lou <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V2) %>% as.vector()

# ??????
??????_lou <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_attr("href")
??????_lou <- paste0("https://n4g.com/",??????_lou)

??????_lou <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_text()

?????????_lou <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("span.temp-label") %>%
  html_text()

??????_lou <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-timeago") %>%
  html_text()

??????_lou <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V1) %>% as.vector()

??????_lou <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V2) %>% as.vector()

# head ??????
head_??????_lou <- c()

env = environment()
env$ans <- NULL
for (i in 1:length(head_??????_lou)){
  tryCatch({
    body <- head_??????_lou[i] %>% read_html()
    
    cat(i, '????????? ?????? ????????????.\n')
    
    head_??????_lou.tmp <- body %>% 
      html_nodes("a.sd-commentcount") %>%
      html_text()
    
    if (length(head_??????_lou.tmp) != 0) {
      head_??????_lou <- append(head_??????_lou, head_??????_lou.tmp)
    } else {
      head_??????_lou <- append(head_??????_lou,"0")
    }   
    
    Sys.sleep(time = 1)
    
  }, error = function(e) {
    cat(conditionMessage(e),"\n")
    env$ans[i] <- "error"
  }
  )
}

head_??????_lou <- head_??????_lou %>% as.integer()

# ?????? ?????? "0" ????????????
er <- grep("error",env$ans)
for (i in 1:length(er)){
  head_??????_lou <- append(head_??????_lou,c(0),after = er[i]-1)
}

head_n4g_lou <- data.frame(head_??????_lou,
                           head_?????????_lou,
                           head_??????_lou,
                           head_??????_lou,
                           head_??????_lou,
                           head_??????_lou,
                           head_??????_lou)

names(head_n4g_lou) <- c("??????", "?????????", "??????", "??????", "??????", "??????", "??????")
head_n4g_lou %>% str()


# ?????? ??????
??????_lou <- c()

env = environment()
env$ans <- NULL
for (i in 1:length(??????_lou)){
  tryCatch({
    body <- ??????_lou[i] %>% read_html()
    
    cat(i, '????????? ?????? ????????????.\n')
    
    ??????_lou.tmp <- body %>% 
      html_nodes("a.sd-commentcount") %>%
      html_text()
    
    if (length(??????_lou.tmp) != 0) {
      ??????_lou <- append(??????_lou, ??????_lou.tmp)
    } else {
      ??????_lou <- append(??????_lou,"0")
    }   
    
    Sys.sleep(time = 0.5)
    
  }, error = function(e) {
    cat(conditionMessage(e),"\n")
    env$ans[i] <- "error"
  }
  )
}
??????_lou <- ??????_lou %>% as.integer()

# ?????? ?????? "0" ????????????
er <- grep("error",env$ans)
for (i in 1:length(er)){
  ??????_lou <- append(??????_lou,c(0),after = er[i]-1)
}

n4g_lou <- data.frame(??????_lou,
                        ?????????_lou,
                        ??????_lou,
                        ??????_lou,
                        ??????_lou,
                        ??????_lou,
                        ??????_lou)

names(n4g_lou) <- c("??????", "?????????", "??????", "??????", "??????", "??????", "??????")
n4g_lou %>% str()

# head + ??????
n4g_lou <- bind_rows(head_n4g_lou,n4g_lou)
n4g_lou %>% dim()

write.csv(n4g_lou, file = "D:/?????????/??????/?????????/?????????????????? ????????????/n4g_lou.csv", row.names=FALSE)

# n4g – mincraft
# RSelenium
remDr <- remoteDriver(remoteServerAddr="localhost", 
                      port=4445L, 
                      browserName="chrome")
remDr$open()
head <- "https://n4g.com/channel/"
keyword <- "mincraft"
end <- "?load=3"

target3 <- paste0(head,keyword,end)

remDr$navigate(target3)

Sys.sleep(time = 5)

n <- 1000

body <- remDr$getPageSource()[[1]]
body <- body %>% read_html()

# lead more n?????? ?????? - ?????? ?????? ?????? ??????
for(i in 1:n){
  tryCatch({
    
    more_reply <- remDr$findElement("css", "a.f-load-more-link")
    more_reply$clickElement()
    
    if(i==n) break()
    
    Sys.sleep(time = 1)
    
  }, error = function(e) cat("????????? ??? ????????????!\n"))
}

# collect element
# head
body <- remDr$getPageSource()[[1]]
body <- body %>% read_html()

head_??????_mc <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_attr("href")

head_??????_mc <- paste0("https://n4g.com/",head_??????_mc)

head_??????_mc <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_text()

head_?????????_mc <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("span.temp-label") %>%
  html_text()

head_??????_mc <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-timeago") %>%
  html_text()

head_??????_mc <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V1) %>% as.vector()

head_??????_mc <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V2) %>% as.vector()

# ??????
??????_mc <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_attr("href")
??????_mc <- paste0("https://n4g.com/",??????_mc)

??????_mc <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_text()

?????????_mc <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("span.temp-label") %>%
  html_text()

??????_mc <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-timeago") %>%
  html_text()

??????_mc <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V1) %>% as.vector()

??????_mc <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V2) %>% as.vector()

# head ??????
head_??????_mc <- c()

env = environment()
env$ans <- NULL
for (i in 1:length(head_??????_mc)){
  tryCatch({
    body <- head_??????_mc[i] %>% read_html()
    
    cat(i, '????????? ?????? ????????????.\n')
    
    head_??????_mc.tmp <- body %>% 
      html_nodes("a.sd-commentcount") %>%
      html_text()
    
    if (length(head_??????_mc.tmp) != 0) {
      head_??????_mc <- append(head_??????_mc, head_??????_mc.tmp)
    } else {
      head_??????_mc <- append(head_??????_mc,"0")
    }   
    
    Sys.sleep(time = 1)
    
  }, error = function(e) {
    cat(conditionMessage(e),"\n")
    env$ans[i] <- "error"
  }
  )
}

head_??????_mc <- head_??????_mc %>% as.integer()

# ?????? ?????? "0" ????????????
er <- grep("error",env$ans)
for (i in 1:length(er)){
  head_??????_mc <- append(head_??????_mc,c(0),after = er[i]-1)
}

head_n4g_mc <- data.frame(head_??????_mc,
                          head_?????????_mc,
                          head_??????_mc,
                          head_??????_mc,
                          head_??????_mc,
                          head_??????_mc,
                          head_??????_mc)

names(head_n4g_mc) <- c("??????", "?????????", "??????", "??????", "??????", "??????", "??????")
head_n4g_mc %>% str()


# ?????? ??????
??????_mc <- c()

env = environment()
env$ans <- NULL
for (i in 1:length(??????_mc)){
  tryCatch({
    body <- ??????_mc[i] %>% read_html()
    
    cat(i, '????????? ?????? ????????????.\n')
    
    ??????_mc.tmp <- body %>% 
      html_nodes("a.sd-commentcount") %>%
      html_text()
    
    if (length(??????_mc.tmp) != 0) {
      ??????_mc <- append(??????_mc, ??????_mc.tmp)
    } else {
      ??????_mc <- append(??????_mc,"0")
    }   
    
    Sys.sleep(time = 0.5)
    
  }, error = function(e) {
    cat(conditionMessage(e),"\n")
    env$ans[i] <- "error"
  }
  )
}
??????_mc <- ??????_mc %>% as.integer()

# ?????? ?????? "0" ????????????
er <- grep("error",env$ans)
for (i in 1:length(er)){
  ??????_mc <- append(??????_mc,c(0),after = er[i]-1)
}

n4g_mc <- data.frame(??????_mc,
                       ?????????_mc,
                       ??????_mc,
                       ??????_mc,
                       ??????_mc,
                       ??????_mc,
                       ??????_mc)

names(n4g_mc) <- c("??????", "?????????", "??????", "??????", "??????", "??????", "??????")
n4g_mc %>% str()

# head + ??????
n4g_mc <- bind_rows(head_n4g_mc,n4g_mc)
n4g_mc %>% dim()

write.csv(n4g_mc, file = "D:/?????????/??????/?????????/?????????????????? ????????????/n4g_mc.csv", row.names=FALSE)


# n4g – league of legend# RSelenium
remDr <- remoteDriver(remoteServerAddr="localhost", 
                      port=4445L, 
                      browserName="chrome")
remDr$open()
head <- "https://n4g.com/channel/"
keyword <- "league-of-legend"
end <- "?load=3"

target4 <- paste0(head,keyword,end)

remDr$navigate(target4)

Sys.sleep(time = 5)

n <- 1000

body <- remDr$getPageSource()[[1]]
body <- body %>% read_html()

# lead more n?????? ?????? - ?????? ?????? ?????? ??????
for(i in 1:n){
  tryCatch({
    
    more_reply <- remDr$findElement("css", "a.f-load-more-link")
    more_reply$clickElement()
    
    if(i==n) break()
    
    Sys.sleep(time = 1)
    
  }, error = function(e) cat("????????? ??? ????????????!\n"))
}

# collect element
# head
body <- remDr$getPageSource()[[1]]
body <- body %>% read_html()

head_??????_lol <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_attr("href")

head_??????_lol <- paste0("https://n4g.com/",head_??????_lol)

head_??????_lol <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_text()

head_?????????_lol <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("span.temp-label") %>%
  html_text()

head_??????_lol <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-timeago") %>%
  html_text()

head_??????_lol <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V1) %>% as.vector()

head_??????_lol <- body %>% 
  html_nodes("div.col-sm-12") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V2) %>% as.vector()

# ??????
??????_lol <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_attr("href")
??????_lol <- paste0("https://n4g.com/",??????_lol)

??????_lol <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-content") %>%
  html_nodes("a.si-title") %>%
  html_text()

?????????_lol <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("span.temp-label") %>%
  html_text()

??????_lol <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-timeago") %>%
  html_text()

??????_lol <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V1) %>% as.vector()

??????_lol <- body %>% 
  html_nodes("div.col-sm-4") %>%
  html_nodes("div.si-wrap") %>%
  html_nodes("div.si-meta") %>%
  html_nodes("a") %>%
  html_text() %>% matrix(ncol=2, byrow = TRUE) %>% as.data.frame() %>% select(V2) %>% as.vector()

# head ??????
head_??????_lol <- c()

env = environment()
env$ans <- NULL
for (i in 1:length(head_??????_lol)){
  tryCatch({
    body <- head_??????_lol[i] %>% read_html()
    
    cat(i, '????????? ?????? ????????????.\n')
    
    head_??????_lol.tmp <- body %>% 
      html_nodes("a.sd-commentcount") %>%
      html_text()
    
    if (length(head_??????_lol.tmp) != 0) {
      head_??????_lol <- append(head_??????_lol, head_??????_lol.tmp)
    } else {
      head_??????_lol <- append(head_??????_lol,"0")
    }   
    
    Sys.sleep(time = 1)
    
  }, error = function(e) {
    cat(conditionMessage(e),"\n")
    env$ans[i] <- "error"
  }
  )
}

head_??????_lol <- head_??????_lol %>% as.integer()

# ?????? ?????? "0" ????????????
er <- grep("error",env$ans)
for (i in 1:length(er)){
  head_??????_lol <- append(head_??????_lol,c(0),after = er[i]-1)
}

head_n4g_lol <- data.frame(head_??????_lol,
                           head_?????????_lol,
                           head_??????_lol,
                           head_??????_lol,
                           head_??????_lol,
                           head_??????_lol,
                           head_??????_lol)

names(head_n4g_lol) <- c("??????", "?????????", "??????", "??????", "??????", "??????", "??????")
head_n4g_lol %>% str()


# ?????? ??????
??????_lol <- c()

env = environment()
env$ans <- NULL
for (i in 1:length(??????_lol)){
  tryCatch({
    body <- ??????_lol[i] %>% read_html()
    
    cat(i, '????????? ?????? ????????????.\n')
    
    ??????_lol.tmp <- body %>% 
      html_nodes("a.sd-commentcount") %>%
      html_text()
    
    if (length(??????_lol.tmp) != 0) {
      ??????_lol <- append(??????_lol, ??????_lol.tmp)
    } else {
      ??????_lol <- append(??????_lol,"0")
    }   
    
    Sys.sleep(time = 0.5)
    
  }, error = function(e) {
    cat(conditionMessage(e),"\n")
    env$ans[i] <- "error"
  }
  )
}
??????_lol <- ??????_lol %>% as.integer()

# ?????? ?????? "0" ????????????
er <- grep("error",env$ans)
for (i in 1:length(er)){
  ??????_lol <- append(??????_lol,c(0),after = er[i]-1)
}

n4g_lol <- data.frame(??????_lol,
                        ?????????_lol,
                        ??????_lol,
                        ??????_lol,
                        ??????_lol,
                        ??????_lol,
                        ??????_lol)

names(n4g_lol) <- c("??????", "?????????", "??????", "??????", "??????", "??????", "??????")
n4g_lol %>% str()

# head + ??????
n4g_lol <- bind_rows(head_n4g_lol,n4g_lol)
n4g_lol %>% dim()

write.csv(n4g_lol, file = "D:/?????????/??????/?????????/?????????????????? ????????????/n4g_lol.csv", row.names=FALSE)



